"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t,g){var i={ok:{label:"OK",default:!0}},o={cancel:{label:"CANCEL"},confirm:{label:"CONFIRM",default:!0}},l={cancel:{label:"CANCEL"},confirm:{label:"CONFIRM",default:!0}},r={animate:!0,attrs:null,buttons:null,callback:null,dismissible:!0,input:null,locale:"en",message:"",title:""},u={en:{OK:"Ok",CONFIRM:"Confirm",CANCEL:"Cancel"},id:{OK:"Oke",CONFIRM:"Setuju",CANCEL:"Batal"}},k={index:0,get:function(t){return(t||"")+k.index++}},s=function(t,e){if("object"===_typeof(e[0]))return e[0];var n={alert:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!1,param:"callback"}],confirm:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!1,param:"callback"}],prompt:[{type:"string",negation:!1,param:"message"},{type:"string",negation:!1,param:"title"},{type:"function",negation:!0,param:"value"},{type:"function",negation:!1,param:"callback"}]}[t],i={};return e.forEach(function(t){if(n.length)for(var e=void 0,a=void 0===t?"undefined":_typeof(t);(e=n.shift())&&e;)if((!e.negation||e.type!=a)&&(e.negation||e.type==a)){i[e.param]=t;break}}),i},e=function(t){for(var e in this.action=null,this.element=null,this.instance=null,this.input=null,this.options=t,this.buttons=[],r)t.hasOwnProperty(e)||(t[e]=r[e]);var a=this.buildHTML(),n=this.buildMOptions();this.instance=new M.Modal(a,n),this.instance.open()};e.prototype.close=function(){this.instance.close()},e.prototype.buildHTML=function(){var t=this.options,e=this,a=null,n=this.element=g('<div class="modal"></div>').appendTo(document.body);if(t.attrs)for(var i in t.attrs)"class"===i?n.addClass(t.attrs[i]):n.attr(i,t.attrs[i]);var o=g('<div class="modal-content"></div>').appendTo(n);if(t.title&&g("<h4>"+t.title+"</h4>").appendTo(o),t.message&&g("<p>"+t.message+"</p>").appendTo(o),t.input&&(a=e.buildInput(o)),t.buttons){var l=g('<div class="modal-footer"></div>').appendTo(n);for(var r in t.buttons){var s=t.buttons[r],p=s.label;u[t.locale]&&u[t.locale][p]&&(p=u[t.locale][p]);var c=g('<a href="#!" data-name="'+r+'" class="modal-action modal-close waves-effect btn-flat">'+p+"</a>").appendTo(l);s.attrs||(s.attrs={}),s.attrs.class||(s.attrs.class="cancel"!=r?"waves-green":"waves-red"),c.addClass(s.attrs.class),c.one("click",function(){e.action=g(this)}),s.default&&c.data("default",!0),e.buttons.push(c)}}return a&&a(),n.get(0)},e.prototype.buildInput=function(t){var e=this,n=this.options.input;if(n){var a=n.instance||{};n.id=k.get("modal-input-"),n.type||(n.type="text");var i,o,l,r=null,s=void 0,p=void 0,c=[],u=[];switch(n.type){case"checkbox":case"radio":s=g('<div class="checkbox-field"></div>').appendTo(t),u=g.isArray(n.value)?n.value:[n.value],n.options.forEach(function(t){var e=g("<div></div>").appendTo(s),a=g("<label></label>").appendTo(e);p=g('<input type="'+n.type+'" name="'+n.id+'" value="'+t.value+'">').appendTo(a),g("<span>"+t.text+"</span>").appendTo(a),"radio"==n.type&&n.value==t.value?p.prop("checked",!0):"checkbox"==n.type&&~u.indexOf(t.value)&&p.prop("checked",!0),c.push(p)}),this.input=c;break;case"slider":p=g('<div id="'+n.id+'"></div>').appendTo(t),noUiSlider.create(p.get(0),a),this.input=p;break;case"range":if(s=g('<div class="range-field"></div>').appendTo(t),p=g('<input type="range" id="'+n.id+'">').appendTo(s),n.attrs)for(var d in n.attrs){var f=n.attrs[d];"class"==d?p.addClass(f):p.attr(d,f)}this.input=p;break;default:switch(s=g('<div class="input-field"></div>').appendTo(t),n.type){case"textarea":p=g('<textarea class="materialize-textarea" id="'+n.id+'"></textarea>').appendTo(s),n.value&&p.val(n.value),l=p,r=function(){setTimeout(function(){l.trigger("autoresize")},100)};break;case"select":if(p=g("<select></select>").appendTo(s),n.attrs&&n.attrs.multiple&&p.prop("multiple",!0),n.label){var v="disabled";n.value||(v+=" selected"),p.append('<option value="" '+v+">"+n.label+"</option>")}if(n.options){var b={};u=g.isArray(n.value)?n.value:[n.value],n.options.forEach(function(t){var e=g('<option value="'+t.value+'">'+t.text+"</option>");~u.indexOf(t.value)&&e.attr("selected","selected"),t.icon&&(p.addClass("icons"),e.attr("data-icon",t.icon)),t.group?(b[t.group]||(b[t.group]=g('<optgroup label="'+t.group+'"></optgroup>').appendTo(p)),b[t.group].append(e)):p.append(e)})}i=p,o=a,r=function(){setTimeout(function(){i.data("instance",new M.Select(i.get(0),o))},100)};break;default:if(p=g('<input type="'+n.type+'" id="'+n.id+'">').appendTo(s),~["email","url"].indexOf(n.type)&&(p.addClass("validate"),s.append('<span class="helper-text" data-error="Invalid value"></span>')),n.options){var m={};n.options.forEach(function(t){m[t.text]=null}),a.data=m,a.onAutocomplete=function(){p.data("efac",!0),n.instance&&n.instance.onAutocomplete&&n.instance.onAutocomplete()},p.data("instance",new M.Autocomplete(p.get(0),a))}n.value&&p.val(n.value),p.on("keyup",function(t){if(13==t.keyCode)return n.options&&p.data("efac")?p.data("efac",!1):void e.buttons.forEach(function(t){t.data("default")&&t.get(0).click()})})}if(n.label&&s.append('<label for="'+n.id+'">'+n.label+"</label>"),n.attrs)for(var y in n.attrs){var h=n.attrs[y];"class"==y?p.addClass(h):p.attr(y,h)}this.input=p}return r}},e.prototype.buildMOptions=function(){var t={},n=this.options,i=this;return t.dismissible=n.dismissible,n.animate||(t.inDuration=t.outDuration=0),t.ready=function(){n.init&&n.init(),i.input&&i.input.get?i.input.get(0).focus():i.buttons.forEach(function(t){t.data("default")&&t.get(0).focus()})},t.complete=function(){if(n.callback)if(i.action){var t=i.action.data("name"),e=n.buttons[t];if(e.callback&&e.callback(),"confirm"!==t)n.callback("cancel"!=t&&void 0);else if(i.input){var a="";switch(n.input.type){case"checkbox":a=[],i.input.forEach(function(t){t.prop("checked")&&a.push(t.val())});break;case"radio":i.input.forEach(function(t){t.prop("checked")&&(a=t.val())});break;case"slider":a=i.input.get(0).noUiSlider.get();break;default:a=i.input.val(),"select"==n.input.type&&g.isArray(a)&&""==a[0]&&a.splice(0,1)}a||(a=""),n.callback(a)}else n.callback(!0)}else n.callback();i.element.remove()},t};var p={addLocale:function(t,e){return u[t]=e,p},alert:function(t,e,a){var n=s("alert",[t,e,a]);return n.buttons=i,n.input=null,p.dialog(n)},confirm:function(t,e,a){var n=s("confirm",[t,e,a]);return n.buttons=o,n.input=null,p.dialog(n)},dialog:function(t){return new e(t)},prompt:function(t,e,a,n){var i=s("prompt",[t,e,a,n]);return i.buttons=l,i.input||(i.input={type:"text"}),i.value&&!i.input.value&&(i.input.value=i.value),p.dialog(i)},removeLocale:function(t){return u[t]&&delete u[t],p},setDefaults:function(t){for(var e in r)t.hasOwnProperty(e)&&(r[e]=t[e]);return p},setLocale:function(t){if(!u[t])throw new Error("Translation named "+t+" not exists.");return r.locale=t,p}};t.mzbox=p}(window,cash);